<div class="cyber-container">
  <div class="section-title main-title">
    <span>Crear Equip</span>
    <div class="title-line"></div>
  </div>

  <div class="cyber-card">
    <div class="card-content">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="form-grid">
          <!-- Nombre del Equipo -->
          <div class="cyber-form-group">
            <label for="nom" class="cyber-label">Nom del Equip</label>
            <div class="cyber-input-wrapper">
              <input type="text" class="cyber-input" id="nom" formControlName="nom">
              <div class="input-glow"></div>
            </div>
            <div *ngIf="form.get('nom')?.invalid && form.get('nom')?.touched" class="cyber-error">
              <span>Aquest camp és obligatori.</span>
            </div>
          </div>

          <!-- Región -->
          <div class="cyber-form-group">
            <label for="regio" class="cyber-label">Regió</label>
            <div class="cyber-input-wrapper">
              <select class="cyber-input cyber-select" id="regio" formControlName="regio">
                <option value="" disabled selected>Selecciona una regió</option>
                <option *ngFor="let r of regiones" [value]="r">{{ r }}</option>
              </select>
              <div class="input-glow"></div>
            </div>
            <div *ngIf="form.get('regio')?.invalid && form.get('regio')?.touched" class="cyber-error">
              <span>Selecciona una regió.</span>
            </div>
          </div>

          <!-- Descripción -->
          <div class="cyber-form-group full-width">
            <label for="descripcio" class="cyber-label">Descripció</label>
            <div class="cyber-input-wrapper">
              <textarea class="cyber-input cyber-textarea" id="descripcio" formControlName="descripcio" rows="3"></textarea>
              <div class="input-glow"></div>
            </div>
          </div>

          <!-- Máximo Integrantes -->
          <div class="cyber-form-group">
            <label for="maxim_integrants" class="cyber-label">Màxim Integrants (2 - 5)</label>
            <div class="cyber-input-wrapper">
              <input type="number" class="cyber-input" id="maxim_integrants" formControlName="maxim_integrants" min="2" max="5">
              <div class="input-glow"></div>
            </div>
            <div *ngIf="form.get('maxim_integrants')?.invalid && form.get('maxim_integrants')?.touched" class="cyber-error">
              <span>Ha de ser un número entre 2 i 5.</span>
            </div>
          </div>

          <!-- Foto del Equipo -->
          <div class="cyber-form-group">
            <label for="foto_equip" class="cyber-label">Foto del Equip</label>
            <div class="cyber-input-wrapper">
              <input type="file" class="cyber-input file-input" id="foto_equip" (change)="onFileSelected($event)">
              <div class="input-glow"></div>
            </div>
          </div>
        </div>

        <!-- Imágenes -->
        <div class="images-container">
          <!-- Vista previa -->
          <div *ngIf="previewImageUrl" class="image-preview new-image">
            <div class="preview-label">Vista prèvia</div>
            <div class="image-frame">
              <img [src]="previewImageUrl" alt="Vista prèvia">
              <div class="image-glow"></div>
            </div>
          </div>
        </div>

        <!-- Mensaje de error general -->
        <div *ngIf="errorMessage" class="cyber-error-message">
          <span>{{ errorMessage }}</span>
        </div>

        <!-- Botón de envío -->
        <div class="button-container">
          <button type="submit" class="cyber-button submit-btn">
            <span class="btn-content">Crear Equip</span>
            <span class="btn-glitch"></span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
