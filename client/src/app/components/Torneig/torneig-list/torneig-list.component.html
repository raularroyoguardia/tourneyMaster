<div class="torneig-cards">
    <div *ngFor="let torneig of torneigs" class="torneig-card" (click)="mostrarDetalls(torneig)">
        <img src="uploads/fotoJocs/{{ torneig.joc_foto }}" alt="">
        <div class="torneig-info">
            <h3>{{ torneig.nom }}</h3>
            <p><strong>Estat:</strong> {{ torneig.estat }}</p>
            <p><strong>Partides:</strong> {{ torneig.quantitat_partides }}</p>
            <p><strong>Participants:</strong> {{ torneig.participants }}</p>
            <p><strong>Tipus:</strong> {{ torneig.tipus }}</p>
            <button class="join-btn" (click)="unirseTorneig(torneig.id); $event.stopPropagation()">Unir-me</button>
        </div>
    </div>
</div>

<div class="modal-backdrop" *ngIf="selectedTorneig">
    <div class="modal-content">
        <span class="close-btn" (click)="tancarModal()">×</span>
        <h2>{{ selectedTorneig.nom }}</h2>
        <img src="uploads/mapes/{{ selectedTorneig.mapa_nom }}" alt="{{ selectedTorneig.mapa_nom }}" />
        <p><strong>Estat:</strong> {{ selectedTorneig.estat }}</p>
        <p><strong>Partides:</strong> {{ selectedTorneig.quantitat_partides }}</p>
        <p><strong>Participants:</strong> {{ selectedTorneig.participants }}</p>
        <p><strong>Tipus:</strong> {{ selectedTorneig.tipus }}</p>
        <p><strong>Descripció:</strong> {{ selectedTorneig.mode_joc }}</p>
        <p><strong>Recompensa:</strong> {{ selectedTorneig.premi_valor }}
            <img src="uploads/logo/estrella-del-trofeo.png"
                style="width: 20px; display: inline; vertical-align: middle; color: yellow;" />
        </p>

        <!-- Marcador Total -->
        <div class="marcador-container marcador-principal">
            <div class="equipo marcador-izquierda">
                <div class="puntos">{{ getTotalPuntos(1) }}</div>
                <div class="nombre">{{ selectedTorneig.equips[0]?.nom || 'Equip 1' }}</div>
            </div>

            <div class="equipo marcador-derecha">
                <div class="puntos">{{ getTotalPuntos(2) }}</div>
                <div class="nombre">{{ selectedTorneig.equips[1]?.nom || 'Equip 2' }}</div>
            </div>
        </div>

        <!-- <div class="marcador-container">
            <div *ngFor="let partida of selectedTorneig.partides">
                <div class="marcador-container marcador-secundario">

                    <div class="equipo marcador-izquierda">
                        <div class="puntos" [ngClass]="{'ganador': partida.resultat_equip_id === 1}">
                            <span *ngIf="partida.resultat_equip_id === 1" style="font-size: 20px;">Ganador</span>
                        </div>
                    </div>

                    <div class="marcador-info-central">
                        <div class="partida-numero">Partida {{ partida.posicio_partida || '-' }}</div>
                        <div class="hora">{{ partida.data_hora || 'Hora no definida' }}</div>
                    </div>

                    <div class="equipo marcador-derecha">
                        <div class="puntos" [ngClass]="{'ganador': partida.resultat_equip_id === 2}">
                            <span *ngIf="partida.resultat_equip_id === 2" style="font-size: 20px;">Ganador</span>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->

        <!-- Contenedor Principal -->
<!-- <div class="marcador-container marcador-principal"> -->
    <!-- NUEVO: contenedor con sombra grande -->
    <div class="contenedor-partidas">
      <div *ngFor="let partida of selectedTorneig.partides" class="marcador-secundario">
        <div class="marcador-container marcador_partida">
          <!-- Equipo Izquierda -->
          <div class="equipo marcador-izquierda">
            <div class="puntos" [ngClass]="{'ganador': partida.resultat_equip_id === 1}">
              <span *ngIf="partida.resultat_equip_id === 1" style="font-size: 20px;">Ganador</span>
            </div>
          </div>
  
          <!-- Información Central de la partida -->
          <div class="marcador-info-central">
            <div class="partida-numero">Partida {{ partida.posicio_partida || '-' }}</div>
            <div class="hora">{{ partida.data_hora || 'Hora no definida' }}</div>
          </div>
  
          <!-- Equipo Derecha -->
          <div class="equipo marcador-derecha">
            <div class="puntos" [ngClass]="{'ganador': partida.resultat_equip_id === 2}">
              <span *ngIf="partida.resultat_equip_id === 2" style="font-size: 20px;">Ganador</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  <!-- </div> -->
  


    </div>
</div>